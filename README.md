# 1 IRFusion
## 1.1 Description

IRFusion (Intron Retention prediction based on sequence and expression feature Fusion) is a tool to detect intron retention(IR) events from RNA-seq data file. The use of IRFusion is divided into two steps: (1) the first step is to build an reference for the species (2) the second step is to predict each RNA-Seq file based on the corresponding species reference. IRFusion takes three input files: BAM file, Ensembl genome file and annotation file. The output is the probability of a single intron being retained.

## 1.2 Download

- Software

IRFusion is implemented in Python and can run on Linux and Mac operating systems. They are freely available for non-commercial use.

| Version        | Changes           |
| :-------------: | :----------------: |
|  [IRFusion.zip](https://drive.google.com/u/0/uc?id=1CrGahrLh-8g9kNintLzjNHpQrppyMKgu&export=download)     | Multi-thread computing implemented |



- Ensembl genome and annotation file

You can download Ensembl genome and annotation file from [the website of Ensembl](http://asia.ensembl.org/index.html "Ensembl")

# 2 Dependencies

- Bedtools (v2.25.0)
- Samtools (v1.6)
- Perl module : strict
- Python3 module: os, sys, math, optparse v1.5.3, tensorflow (v2.3.0), keras (v2.4.3), h5py (v2.10.0), numpy (v1.18.5)
  <br>or Python2 module: os, sys, math, optparse v1.5.3, tensorflow (v1.10.0), keras (v2.0.4), h5py (v2.10.0), numpy (v1.14.5)</br>

# 3 Install

After downloading the source file, unzip it, and add the IRFusion package path to your environmental variable PATH by modifying your .bashrc or .bash_profile file in your home directory.
Note 1: In the first line of the Python scripts in IRFusion, the path for Python is set as follows by default:

`/usr/bin/env python`

Just in case, if your Python is not in the default path, please __change the first line (e.g. #!/usr/bin/env python) in the scripts__ so that it correctly points to Python in your machine.

Note 2: And, check that all scripts in the package are excecutable.

# 4 Usage
## 4.1 Run IRFusion
Using IRFusion is very simple. 

__Step 1: Building Reference__

` IRFusion.py -m build -g genome_path/human.fa -a genome_path/human.gtf -i reference_path `

__Step 2: Predict IR__

` IRFusion.py  -m predict -i reference_path -b bam_path/test.bam -o output_path/ -c 3 `

Note ` -c ` arguments is optional. ` -c 3 ` means that in addition to the predicted score >= 0.5, the read counts for the intron at least 3 is predicted to be IR. 

The default ` -c ` parameter can be used as follows (Default: 0)

` IRFusion.py  -m predict -i reference_path -b bam_path/test.bam -o output_path/ `

A BAM file that is generated by aligning reads to a reference genome using tools such as STAR.

## 4.2 Help document
To get more information, use:

` IRFusion.py -h `
